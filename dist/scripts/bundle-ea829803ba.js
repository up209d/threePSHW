!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_routeConfig2=_interopRequireDefault(require("./routeConfig")),_utils2=_interopRequireDefault(require("./services/utils")),_preload2=_interopRequireDefault(require("./services/preload")),_home2=_interopRequireDefault(require("./pages/home")),myApp=angular.module("dlApp",["ui.router","ngAnimate","hmTouchEvents"]);myApp.controller("dlController",["$rootScope","$scope","$timeout","utilsService",function($rootScope,$scope,$timeout,utilsService){$scope.utilsService=utilsService}]),myApp.service("utilsService",_utils2.default),myApp.service("preloadService",_preload2.default),myApp.component("dlHome",_home2.default),myApp.config(_routeConfig2.default),myApp.run(["$rootScope","$state","$transitions","$trace","$timeout",function($rootScope,$state,$transitions,$trace,$timeout){$rootScope.transition=$transitions,$rootScope.stateRecords=[],$rootScope.transition.onCreate({},function(transition){}),$rootScope.transition.onBefore({},function(transition){$rootScope.rootState={lastState:_extends({},transition.$from(),{params:_extends({},$state.params)}),nextState:_extends({},transition.$to(),{params:_extends({},transition.params())})}}),$rootScope.transition.onError({},function(transition){}),$rootScope.transition.onStart({},function(transition){}),$rootScope.transition.onRetain({},function(transition){}),$rootScope.transition.onEnter({},function(transition){}),$rootScope.transition.onExit({},function(transition){}),$rootScope.transition.onFinish({},function(transition){}),$rootScope.transition.onSuccess({},function(transition){$rootScope.stateRecords.push($rootScope.rootState.currentState)})}]),exports.default=myApp},{"./pages/home":2,"./routeConfig":4,"./services/preload":5,"./services/utils":6}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _home2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(require("./home.template"));exports.default={template:function(){return _home2.default[0]},bindings:{},controller:["$scope","$timeout","$element",function($scope,$timeout,$element){var self=this;window._three=self,THREE.BAS=BAS,self.isInited=!1,self.isPostLinked=!1,self.animationHandler=null,self.$onInit=function(){self.isInited=!0,self.state={resolution:window.devicePixelRatio,fps:60,step:1/60,frame:0,currentTime:(new Date).getTime(),lastTime:(new Date).getTime(),totalTime:0}},self.$postLink=function(){self.canvas=$element[0].querySelector("canvas"),self.isPostLinked=!0,self.stats=new Stats,self.stats.showPanel(0),document.body.appendChild(self.stats.dom),self.renderer=new THREE.WebGLRenderer({canvas:$element[0].querySelector("canvas"),antialias:!0,alpha:!0}),self.renderer.setClearColor("#FFFFFF",1),self.renderer.setSize(self.canvas.clientWidth,self.canvas.clientHeight),self.renderer.setPixelRatio(self.state.resolution||1),self.camera=new THREE.PerspectiveCamera(45,self.canvas.clientWidth/self.canvas.clientHeight,1,1e4),self.scene=new THREE.Scene,self.controls=new THREE.OrbitControls(self.camera),self.lights=[],self.lights[0]=new THREE.DirectionalLight("#00FF00",1),self.lights[0].position.set(-1,1,1),self.scene.add(self.lights[0]),self.lights[1]=new THREE.DirectionalLight("#ff0000",1),self.lights[1].position.set(1,1,1),self.scene.add(self.lights[1]),self.lights[2]=new THREE.PointLight("#0000ff",1),self.lights[2].position.set(0,0,0),self.scene.add(self.lights[2]),function(options){void 0===options&&(options={});for(var cubeSize=(options=Object.assign({gridSize:100,gridLength:30,gridPadding:1,delta:new THREE.Vector3(0,600,0),duration:15,totalDelay:5},options)).gridSize/options.gridLength,cubeCount=Math.pow(options.gridLength,3),prefab=new THREE.PlaneGeometry(cubeSize-options.gridPadding,cubeSize-options.gridPadding,1),geometry=(new THREE.BoxBufferGeometry(cubeSize-options.gridPadding,cubeSize-options.gridPadding,cubeSize-options.gridPadding),new THREE.BAS.PrefabBufferGeometry(prefab,cubeCount)),startPositionBuffer=geometry.createAttribute("startPosition",3),endPositionBuffer=geometry.createAttribute("endPosition",3),rotationBuffer=geometry.createAttribute("rotation",4),durationBuffer=geometry.createAttribute("duration",1),startTimeBuffer=geometry.createAttribute("startTime",1),cubeIndexBuffer=geometry.createAttribute("cubeIndex",1),cubeIndex=0,tmpa=[],x=0;x<options.gridLength;x++)for(var y=0;y<options.gridLength;y++)for(var z=0;z<options.gridLength;z++)tmpa[0]=THREE.Math.mapLinear(x,0,options.gridLength-1,-options.gridSize/2,options.gridSize/2)+options.delta.x,tmpa[1]=THREE.Math.mapLinear(y,0,options.gridLength-1,-options.gridSize/2,options.gridSize/2)+options.delta.y,tmpa[2]=THREE.Math.mapLinear(z,0,options.gridLength-1,-options.gridSize/2,options.gridSize/2)+options.delta.z,geometry.setPrefabData(startPositionBuffer,cubeIndex,[tmpa[0],tmpa[1],tmpa[2]]),tmpa[0]=THREE.Math.mapLinear(x,0,options.gridLength-1,-options.gridSize/2,options.gridSize/2)-options.delta.x,tmpa[1]=THREE.Math.mapLinear(y,0,options.gridLength-1,-options.gridSize/2,options.gridSize/2)-options.delta.y,tmpa[2]=THREE.Math.mapLinear(z,0,options.gridLength-1,-options.gridSize/2,options.gridSize/2)-options.delta.z,geometry.setPrefabData(endPositionBuffer,cubeIndex,[tmpa[0],tmpa[1],tmpa[2]]),tmpa[0]=2*Math.random()-1,tmpa[1]=2*Math.random()-1,tmpa[2]=2*Math.random()-1,tmpa[3]=2*Math.PI,geometry.setPrefabData(rotationBuffer,cubeIndex,[tmpa[0],tmpa[1],tmpa[2],tmpa[3]]),tmpa[4]=options.duration,geometry.setPrefabData(durationBuffer,cubeIndex,[tmpa[4]]),tmpa[5]=options.totalDelay/cubeCount*cubeIndex*Math.random()*options.totalDelay,geometry.setPrefabData(startTimeBuffer,cubeIndex,[tmpa[5]]),tmpa[6]=cubeIndex,geometry.setPrefabData(cubeIndexBuffer,cubeIndex,[tmpa[6]]),cubeIndex++;var material=new THREE.BAS.PhongAnimationMaterial({flatShading:THREE.FlatShading,wireframe:!1,uniforms:{time:{value:0}},vertexFunctions:["\n            float rand(float n){return fract(sin(n) * 43758.5453123);}\n            \n            float noise(float p){\n              float fl = floor(p);\n              float fc = fract(p);\n              return mix(rand(fl), rand(fl + 1.0), fc);\n            }\n            \n            vec3 cubicBezier(vec3 p0, vec3 c0, vec3 p1, vec3 c1, float t) {   \n              float tn = 1.0 - t;\n              return \n                tn * tn * tn * p0 + \n                3.0 * tn * tn * t * c0 + \n                3.0 * tn * t * t * c1 + \n                t * t * t * p1;\n            }\n            \n            vec3 sample(vec3 startPosition,vec3 endPosition,float progress, float radius) {\n              vec3 position;\n              float angle = progress * PI/2.0;\n              float randomFactor = (1.0-rand(angle+cubeIndex))*sin(angle)*cos(angle)*radius*100.0;\n              position.x = startPosition.x + radius*sin(angle*20.0);\n              position.y = startPosition.y*cos(angle) + endPosition.y*sin(angle);\n              position.z = startPosition.z + radius*sin(angle*24.0);\n              return position;\n            }\n            \n          ",THREE.BAS.ShaderChunk.ease_sine_in_out,THREE.BAS.ShaderChunk.quaternion_rotation],vertexParameters:["uniform float time;","attribute vec3 startPosition;","attribute vec3 endPosition;","attribute vec4 rotation;","attribute float startTime;","attribute float duration;","attribute float cubeIndex;"],vertexPosition:["float random = rand(time);","float progress = (clamp(time - startTime, 0.0, duration) / duration);","float noiseFactor = noise(cubeIndex+time)/2.0;","progress = easeSineInOut(progress);","float scaleFactor = 1.0 + (sin(progress * PI)*noiseFactor);","transformed *= scaleFactor;","vec4 quaternion = quatFromAxisAngle(rotation.xyz,rotation.w * progress + rotation.w*noiseFactor);","transformed = rotateVector(quaternion, transformed);","transformed += sample(startPosition,endPosition,progress,cubeIndex/10.0);"],fragmentParameters:[],fragmentSpecular:[]});self.cubes=new THREE.Mesh(geometry,material),self.scene.add(self.cubes)}(),self.camera.position.set(0,0,2e3),self.controls.update(),self.runTimeStepFixed(),window.addEventListener("resize",self.resize)},self.$onChange=function(changes){self.isInited&&self.isPostLinked},self.$onDestroy=function(){window.removeEventListener("resize",self.resize)},self.update=function(){self.stats.begin(),self.stats.end(),self.camera.updateProjectionMatrix(),self.camera.updateMatrixWorld(),self.camera.matrixWorldInverse.getInverse(self.camera.matrixWorld),self.cubes.material.uniforms.time.value+=.06,self.cubes.material.uniforms.time.value%=30,self.controls.update()},self.resize=function(){self.camera.aspect=window.innerWidth/window.innerHeight,self.renderer.setSize(window.innerWidth,window.innerHeight)},self.render=function(){self.renderer.render(self.scene,self.camera)},self.renderChild=function(){},self.runTimeStepFixed=function(){self.state.currentTime=(new Date).getTime();var deltaTime=self.state.currentTime-self.state.lastTime;for(deltaTime=deltaTime>1e3?1e3:deltaTime,self.state.totalTime+=deltaTime;self.state.totalTime>1e3*self.state.step;)self.state.totalTime-=1e3*self.state.step,self.update(self.state.step);self.state.lastTime=self.state.currentTime,self.render(),self.animationHandler=requestAnimationFrame(self.runTimeStepFixed)}}]}},{"./home.template":3}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=['\n<canvas class="up-renderer"></canvas>\n']},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var routeConfig=function($stateProvider,$urlRouterProvider,$locationProvider){var routes=[{name:"root",abstract:!0,resolve:{rootMsg:function(){return"Root / "},preloadFont:function(preloadService){return preloadService.fonts(["Roboto:300,400,700"])}},data:{page:"root"},onEnter:function($transition$,$state$){},onExit:function(){},template:'<div class="animate-show-hide animation fade-in-out-down-up instant-hide" ui-view></div>',controller:["$scope","$state",function($scope,$state){$scope.state=$state}]},{name:"root.home",url:"/",resolve:{homeMsg:function(){return"Home / "}},data:{page:"home"},onEnter:function(){},onExit:function(){},params:{},views:{"":{component:"dlHome"}}}];$urlRouterProvider.otherwise("/"),routes.forEach(function(route){$stateProvider.state(route)}),$locationProvider.html5Mode({enabled:!1,requireBase:!1}).hashPrefix("")};routeConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],exports.default=routeConfig},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var preloadService=function($rootScope,$state,$timeout,$q,$http){return{fonts:function(){var _fonts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["Roboto:300,400,700"];"string"==typeof _fonts&&(_fonts=[_fonts]);var defer=$q.defer(),WebFontConfig={google:{families:_fonts,timeout:3e3},class:!0,event:!0,loading:function(){},active:function(){defer.resolve()},inactive:function(){defer.reject()},fontloading:function(familyName,fvd){},fontactive:function(familyName,fvd){},fontinactive:function(familyName,fvd){}};return WebFont.load(WebFontConfig),defer.promise},cacheImages:function(list){var timeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,rejectWhenTimeout=arguments.length>2&&void 0!==arguments[2]&&arguments[2],defer=$q.defer(),count=0,invalidItemCount=0;return void 0!==list&&list.length>=1&&list.forEach(function(item){var extension=/\.(.*)$/.exec(item);if(null!==extension)if("svg"===extension[1].toLowerCase())$http.get(item,{cache:!0}).then(function(res){++count===list.length-invalidItemCount&&defer.resolve()});else{var newImage=new Image;newImage.src=item,newImage.onload=function(){++count===list.length-invalidItemCount&&defer.resolve()}}else invalidItemCount++}),timeout>=1e3&&$timeout(function(){rejectWhenTimeout?defer.reject():defer.resolve()},timeout),defer.promise}}};preloadService.$inject=["$rootScope","$state","$timeout","$q","$http"],exports.default=preloadService},{}],6:[function(require,module,exports){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0});var utilsService=function($rootScope,$state,$http,$timeout,$q,$sce){var _service,service=(_service={mobileDetect:MobileDetect?new MobileDetect(window.navigator.userAgent):null,uniqueKey:function(){return Math.random().toString(36).substr(2,9)},debounce:function(func,wait,immediate){var timeout=void 0,deferred=$q.defer();return function(){var context=this,args=arguments,callNow=immediate&&!timeout;return timeout&&$timeout.cancel(timeout),timeout=$timeout(function(){timeout=null,immediate||(deferred.resolve(func.apply(context,args)),deferred=$q.defer())},wait),callNow&&(deferred.resolve(func.apply(context,args)),deferred=$q.defer()),deferred.promise}},throttle:function(fn,threshhold,reFire,scope){threshhold||(threshhold=250),reFire||(reFire=!1);var last=void 0,deferTimer=void 0,deferred=$q.defer();return function(){var context=scope||this,now=+new Date,args=arguments;return last&&now<last+threshhold?($timeout.cancel(deferTimer),reFire&&(deferTimer=$timeout(function(){last=now,deferred.resolve(fn.apply(context,args)),deferred=$q.defer()},threshhold))):(last=now,deferred.resolve(fn.apply(context,args)),deferred=$q.defer()),deferred.promise}},mapRange:function(value,from,to,newFrom,newTo){return to===from?to:(value-from)/(to-from)*(newTo-newFrom)+newFrom},avoidOrphanWord:function(){var str=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",count=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(""!==str){for(var pattern=/\s/gi,result=str.split(pattern).reverse(),i=0;i<count-1;i++)result[1]=result[1]+"&nbsp;"+result[0],result.shift();return result.reverse().join(" ")}return str}},_defineProperty(_service,"uniqueKey",function(){return Math.random().toString(36).substr(2,9)}),_defineProperty(_service,"trigger",function(el,eventType){if(eventType)if(service.isIE()){var e=document.createEvent("Event");e.initEvent(eventType,!0,!0),el&&$timeout(function(){el.dispatchEvent(e)})}else{var _e=new Event(eventType);el&&$timeout(function(){el.dispatchEvent(_e,!0,!0)})}return!0}),_defineProperty(_service,"isSet",function(e){return void 0!==e}),_defineProperty(_service,"isIE",function(){var isIE=!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g);return isIE}),_defineProperty(_service,"isSafari",function(){var isSafari=!!navigator.userAgent.match(/safari/gi)||!!navigator.userAgent.match(/safari/gi),isChrome=!!navigator.userAgent.match(/chrome/gi)||!!navigator.userAgent.match(/chrome/gi);return isSafari&&!isChrome}),_defineProperty(_service,"isChrome",function(){var isChrome=!!navigator.userAgent.match(/chrome/gi)||!!navigator.userAgent.match(/chrome/gi);return isChrome}),_defineProperty(_service,"isFireFox",function(){var isFireFox=!!navigator.userAgent.match(/firefox/gi)||!!navigator.userAgent.match(/firefox/gi);return isFireFox}),_defineProperty(_service,"isHandheld",function(){var browserDetection=new MobileDetect(window.navigator.userAgent);return!!(browserDetection.mobile()||browserDetection.phone()||browserDetection.tablet())}),_defineProperty(_service,"getSVGImage",function(link){var self=this;self.imagesCache||(self.imagesCache=[]);var currentIndex=self.imagesCache.findIndex(function(item){return item.path===link});return-1!==currentIndex?self.imagesCache[currentIndex].data:(currentIndex=self.imagesCache.length||0,self.imagesCache.push({path:link,data:$sce.trustAsHtml('<span class="dl-pre-loading"></span>')}),$http({method:"GET",cache:!0,url:link}).then(function(res){self.imagesCache[currentIndex]={path:link,data:$sce.trustAsHtml(res.data)}}),self.imagesCache[currentIndex].data)}),_service);return service};utilsService.$inject=["$rootScope","$state","$http","$timeout","$q","$sce"],exports.default=utilsService},{}]},{},[1]);